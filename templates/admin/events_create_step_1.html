<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
    <!-- Подключение Bootstrap CSS -->
	<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Подключение Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<style>
		body {
			font-family: system-ui;
		}
		.button {
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			background: #1D076E;
			border-radius: 6px;
			border: none;
			padding: 10px 16px;
			margin-bottom: 10px;
			text-align: left;
		}
		.button2 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			align-items: center;
			background: none;
			border-radius: 8px;
			border: 2px dashed #5138FF;
			padding-top: 39px;
			padding-bottom: 39px;
			margin-left: 24px;
			margin-right: 24px;
			text-align: left;
		}
		.button3 {
			flex-shrink: 0;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			background: #F1F0F0;
			border-radius: 6px;
			border: none;
			padding: 13px 12px;
			text-align: left;
		}
		.button4 {
			flex-shrink: 0;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			background: none;
			border-radius: 8px;
			border: 2px solid #D4D2FF;
			padding: 16px 17px;
			text-align: left;
		}
		.button5 {
			flex-shrink: 0;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			background: #6D4DFF;
			border-radius: 8px;
			border: none;
			padding: 16px 17px;
			text-align: left;
		}
		.button-row-view {
			align-self: stretch;
			display: flex;
			align-items: center;
			background: #F3F3F3;
			border-radius: 8px;
			border: none;
			padding: 13px 16px;
			text-align: left;
		}
		.column {
			flex-shrink: 0;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			background: #1A0043;
			padding: 25px 12px;
		}
		.column2 {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin-bottom: 175px;
			gap: 24px;
		}
		.column3 {
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		.column4 {
			display: flex;
			flex-direction: column;
			align-items: flex-start;
		}
		.column5 {
			flex: 1;
			display: flex;
			flex-direction: column;
			background: #FFFFFF;
			padding-top: 48px;
			padding-bottom: 48px;
			gap: 38px;
		}
		.column6 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			margin-left: 270px;
			margin-right: 270px;
			gap: 36px;
		}
		.column7 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			gap: 32px;
		}
		.column8 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
			gap: 10px;
		}
		.column9 {
			width: 253px;
			display: flex;
			flex-direction: column;
			gap: 24px;
		}
		.column10 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			gap: 10px;
		}
		.contain {
			display: flex;
			flex-direction: column;
			background: #FFFFFF;
		}
		.image {
			width: 20px;
			height: 20px;
			object-fit: fill;
		}
		.image2 {
			border-radius: 8px;
			width: 18px;
			height: 18px;
			object-fit: fill;
		}
		.image3 {
			width: 24px;
			height: 24px;
			object-fit: fill;
		}
		.image4 {
			width: 16px;
			height: 16px;
			object-fit: fill;
		}
		.image5 {
			width: 40px;
			height: 42px;
			object-fit: fill;
		}
		.row-view {
			align-self: stretch;
			display: flex;
			align-items: flex-start;
		}
		.row-view2 {
			display: flex;
			align-items: center;
			padding-top: 2px;
			padding-bottom: 2px;
			margin: 10px 16px 20px 16px;
			gap: 12px;
		}
		.row-view3 {
			display: flex;
			align-items: center;
			padding-top: 2px;
			padding-bottom: 2px;
			gap: 12px;
		}
		.row-view4 {
			display: flex;
			align-items: center;
			padding-top: 2px;
			padding-bottom: 2px;
			margin: 10px 16px;
			gap: 12px;
		}
		.row-view5 {
			display: flex;
			align-items: center;
			background: #6D4DFF;
			border-radius: 8px;
			padding: 12px 47px;
			gap: 7px;
		}
		.row-view6 {
			display: flex;
			align-items: center;
			margin: 12px 16px;
			gap: 12px;
		}
		.row-view7 {
			display: flex;
			align-items: center;
			padding: 10px 16px;
			gap: 50px;
		}
		.row-view8 {
			flex-shrink: 0;
			display: flex;
			align-items: center;
			padding-right: 1px;
			gap: 10px;
		}
		.row-view9 {
			align-self: stretch;
			display: flex;
			align-items: center;
			margin-left: 54px;
			margin-right: 54px;
			gap: 24px;
		}
		.row-view10 {
			align-self: stretch;
			display: flex;
			align-items: flex-start;
			background: #F3F3F3;
			border-radius: 8px;
			padding: 14px 16px 76px 16px;
		}
		.row-view11 {
			align-self: stretch;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		.row-view12 {
			flex-shrink: 0;
			display: flex;
			align-items: flex-start;
			gap: 12px;
		}
		.scroll-view {
			height: 900px;
			align-self: stretch;
			background: #FFFFFF;
		}
		.text {
			color: #F5F5F5;
			font-size: 20px;
			font-weight: bold;
			margin-bottom: 29px;
			margin-left: 16px;
		}
		.text2 {
			color: #F2F2FF;
			font-size: 14px;
			font-weight: bold;
		}
		.text3 {
			color: #F5F5F5;
			font-size: 14px;
			font-weight: bold;
		}
		.text4 {
			color: #FFFFFF;
			font-size: 14px;
			font-weight: bold;
		}
		.text5 {
			color: #FFFFFF;
			font-size: 16px;
			font-weight: bold;
		}
		.text6 {
			color: #000000;
			font-size: 18px;
			font-weight: bold;
		}
		.text7 {
			color: #000000;
			font-size: 23px;
			font-weight: bold;
		}
		.text8 {
			color: #000000;
			font-size: 16px;
			font-weight: bold;
		}
		.text9 {
			color: #000000;
			font-size: 20px;
			font-weight: bold;
			text-align: center;
			margin-left: 22px;
			margin-right: 22px;
		}
		.text10 {
			color: #4E4E4E;
			font-size: 14px;
			text-align: center;
		}
		.text11 {
			color: #FFFFFF;
			font-size: 16px;
			font-weight: bold;
			margin-left: 17px;
			margin-right: 17px;
		}
		.text12 {
			color: #A0A0A0;
			font-size: 16px;
			flex: 1;
		}
		.text13 {
			color: #000000;
			font-size: 14px;
			font-weight: bold;
			margin-right: 11px;
		}
		.text14 {
			color: #A0A0A0;
			font-size: 16px;
			margin-bottom: 1px;
			flex: 1;
		}
		.text15 {
			color: #000000;
			font-size: 14px;
			font-weight: bold;
			margin-top: 1px;
			margin-bottom: 1px;
			margin-right: 10px;
		}
		.text16 {
			color: #252525;
			font-size: 14px;
			font-weight: bold;
		}
		.text17 {
			color: #6D4DFF;
			font-size: 16px;
			font-weight: bold;
		}
		.view {
			flex-shrink: 0;
			display: flex;
			flex-direction: column;
			align-items: center;
		}
		.view2 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			background: #FFFFFF;
			border-radius: 12px;
			padding-top: 24px;
			padding-bottom: 24px;
			box-shadow: 0px 1px 5px #0000001A;
		}
		.view3 {
			align-self: stretch;
			display: flex;
			flex-direction: column;
			background: #6D4DFF;
			border-radius: 8px;
			padding-top: 12px;
			padding-bottom: 12px;
			margin-left: 40px;
			margin-right: 40px;
		}
		.desktop-event-create {
			display: flex;
			  /*width: 1440px;*/
			  height: 900px;
			  align-items: center;
			  position: relative;
			  background-color: #ffffff;
		}
		.upload-dropzone {
  align-self: stretch;
			display: flex;
			flex-direction: column;
			align-items: center;
			background: none;
			border-radius: 8px;
			border: 2px dashed #5138FF;
			padding-top: 39px;
			padding-bottom: 39px;
			margin-left: 24px;
			margin-right: 24px;
			text-align: left;
}
.upload-dropzone.dragover {
  border-color: #6D4DFF;
  background: #f7f3ff;
}
.upload-dropzone input[type="file"] {
  display: none;
}
.upload-btn {
  background: #6D4DFF;
  color: #fff;
  padding: 12px 36px;
  border: none;
  border-radius: 8px;
  font-size: 1.2em;
  margin-top: 20px;
  cursor: pointer;
}
#preview-wrapper {
  margin-bottom: 20px;
}
.input-block {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 10px;
  width: 660px;
  height: 78px;
}
.textarea-row {
  height: 110px;              /* Высота из фигмы */
  min-height: 110px;
}
textarea:focus, input:focus {
    outline: none !important;
    box-shadow: none;
    border-color: transparent; /* или #F3F3F3 если нужен родной фон */
}

.textarea-field {
  min-height: 82px;  /* 110 - паддинги (14*2) */
  max-height: 82px;
  height: 82px;
  overflow-y: auto;
	 resize: none;
}

.input-label {
  font-family: 'Instrument Sans', sans-serif;
  font-style: normal;
  font-weight: 600;
  font-size: 16px;
  line-height: 130%;
  color: #000;
  margin-bottom: 0;
}

.input-row {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  gap: 10px;
  width: 690px;
  height: 47px;
  background: #F3F3F3;
  border-radius: 8px;
}

.input-field {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-family: 'Instrument Sans', sans-serif;
  font-style: normal;
  font-weight: 400;
  font-size: 16px;
  line-height: 120%;
  color: #000;
}

.input-field::placeholder {
  color: #A0A0A0;
  font-family: inherit;
}

.input-info {
	margin-bottom: auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
}

.input-counter {
  font-family: 'Raleway', sans-serif;
  font-style: normal;
  font-weight: 500;
  font-size: 14px;
  line-height: 132%;
  color: rgba(0, 0, 0, 0.6);
}

.input-calendar {
  width: 20px;
  height: 20px;
}
.input-field:focus, .textarea-field:focus {
	outline: none !important;
    box-shadow: none;
    border-color: transparent; /* или #F3F3F3 если нужен родной фон */
}
.form-actions {
  display: flex;
  gap: 16px;
  justify-content: flex-end;
  margin-top: 32px; /* <-- это отделит кнопки от Description */
}
.form-actions {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: flex-end;
  width: 690px;
  margin-top: 55px;    /* вот этот отступ ! */
  gap: 16px;
  /* остальное из фигмы */
}

.progress-indicator {
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  padding: 13px 12px;
  width: 57px;
  height: 44px;
  background: #F1F0F0;
  border-radius: 6px;
}

.step-text {
  font-family: 'Instrument Sans', sans-serif;
  font-weight: 600;
  font-size: 14px;
  line-height: 132%;
  color: #252525;
}

.button-row {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 12px;
  /* ширина — по кнопкам */
}

/* Примерные стили для кнопок */
.btn {
  font-family: 'Instrument Sans', sans-serif;
  font-weight: 600;
  font-size: 16px;
  line-height: 130%;
  padding: 12px 16px;
  height: 46px;
  border-radius: 8px;
  min-width: 60px;
  cursor: pointer;
}
.btn.btn-outline {
  border: 2px solid #D4D2FF;
  color: #6D4DFF;
  background: #fff;
}
.btn.btn-primary {
  background: #6D4DFF;
  color: #fff;
  border: none;
}
.button-back {
  background: #f3f3f3;
  border: 2px solid #E0E0E0;
  border-radius: 8px;
  width: 100px; /* или нужные размеры */
  height: 100px;
  transition: border 0.2s, box-shadow 0.2s;
  cursor: pointer;
}

.button-back:focus {
  border: 2px solid #6D4DFF; /* Фиолетовый из макета или свой */
  box-shadow: 0 0 0 2px #ede6ff;
  outline: none;
}
	</style>
<body>
    <div class="desktop-event-create">
      {% include 'admin/sidebar.html' %}
		<form method="POST" action="/admin/events/create" enctype="multipart/form-data">
			<input type="hidden" name="step" value="step_1">
    <div class="column5">
					<div class="row-view9">

						<button
							  type="button"
							  style="
								background: none;
								border: none;
								padding: 0;
								margin: 0;
								cursor: pointer;
								outline: none;
							  "
							   onclick="window.location.href='/admin/events/cancel'"
							  aria-label="Назад"
							>
							  <img src="/static/images/sidebar/left.svg" alt="Back" draggable="false" style="display: block;" />
							</button>
													<span class="text6" >
							Create new event
						</span>
					</div>
					<div class="column6">
						<span class="text7" style="font-family: Raleway,serif;">
							General info
						</span>

						<div class="column7">
							<div class="column8">
								<span class="text8" style="font-family: Instrument Sans,serif;">
									Upload event cover
								</span>
								<div class="view2">
									<div class="upload-dropzone" id="dropzone">
									  <div id="preview-wrapper">
										{% if event_image_url %}
											<img id="preview-image-temp"
												 src="{{ event_image_url }}"
												 style="display:block; max-width: 320px; max-height: 180px; margin-bottom: 10px; border-radius: 8px;">
										  {% else %}
											<img id="preview-image"
												 style="display:none; max-width: 320px; max-height: 180px; margin-bottom: 10px; border-radius: 8px;">
										  {% endif %}
									  </div>
									  <div id="upload-label">
										<strong style="font-family: Instrument Sans,serif;
											font-weight: 600;
											font-size: 20px;
											line-height: 120%;
											text-align: center;margin-left: 9%;
											">Upload event cover</strong>
										<div style="margin-top:8px; color:#666;font-family: Instrument Sans,serif;
											font-weight: 400;
											font-style: Regular;
											font-size: 14px;
											leading-trim: NONE;
											line-height: 120%;
											letter-spacing: 0%;
											text-align: center;
											">Drag an image here or <span style="font-family: Instrument Sans,serif;
												font-weight: 600;
												font-size: 14px;
												line-height: 120%;
												text-align: center;
												">click</span> to upload<br>JPEG, JPG, PNG · Max 5MB</div>
										<label class="upload-btn" style="font-family: Instrument Sans,serif;" for="event-cover">Upload your image</label>
										<input type="file" id="event-cover" name="event_cover" accept="image/png,image/jpeg,image/jpg">
									  </div>
									</div>
								</div>
							</div>
							<div class="input-block">
  <label class="input-label" for="event-name">Event name</label>
  <div class="input-row">
    <input
      class="input-field"
      id="event-name"
      name="event_name"
      type="text"
      maxlength="60"
      placeholder="Enter event name"
      oninput="updateCharCount(this, '#event-name-count', 60)"
      autocomplete="off"
    />
    <div class="input-info">
      <span id="event-name-count" class="input-counter">0/60 characters</span>
      <img src="/static/images/sidebar/CalendarBlank.svg" class="input-calendar" alt="calendar"/>
    </div>
  </div>
</div>
							<div class="input-block">
  <label class="input-label" for="event-desc">Description</label>
  <div class="input-row textarea-row">
    <textarea
      class="input-field textarea-field"
      id="event-desc"
      name="event_desc"
      maxlength="250"
      placeholder="Enter event description"
      oninput="updateCharCount(this, '#event-desc-count', 250)"
      autocomplete="off"
    ></textarea>
    <div class="input-info">
      <span id="event-desc-count" class="input-counter">0/250 characters</span>
      <img src="/static/images/sidebar/CalendarBlank.svg" class="input-calendar" alt="calendar"/>
    </div>
  </div>
</div>
						</div>
						<div class="form-actions">
						  <div class="progress-indicator">
							<span class="step-text">1 of 3</span>
						  </div>
						  <div class="button-row">
							<button class="btn btn-outline" type="button" onclick="window.location.href='/admin/events/cancel'">Cancel</button>
							<button class="btn btn-primary">Next</button>
						  </div>
						</div>
					</div>
				</div>
			    </form>
    </div>

  </body>
<script>
const dropzone = document.getElementById('dropzone');
const fileInput = document.getElementById('event-cover');
const previewImage = document.getElementById('preview-image');
const previewWrapper = document.getElementById('preview-wrapper');
const uploadLabel = document.getElementById('upload-label');

// Drag & Drop Events
dropzone.addEventListener('dragover', (e) => {
  e.preventDefault();
  dropzone.classList.add('dragover');
});
dropzone.addEventListener('dragleave', (e) => {
  e.preventDefault();
  dropzone.classList.remove('dragover');
});
dropzone.addEventListener('drop', (e) => {
  e.preventDefault();
  dropzone.classList.remove('dragover');
  const files = e.dataTransfer.files;
  if (files && files[0]) {
    fileInput.files = files;
    showPreview(files[0]);
  }
});
// Click to trigger input
dropzone.addEventListener('click', (e) => {
  // Чтобы не срабатывало, если клик по лейблу, кнопке или инпуту
  if (!e.target.closest('label') && !e.target.closest('input')) {
    fileInput.click();
  }
});

// Preview function
function showPreview(file) {
  if (!file.type.startsWith('image/')) {
    previewImage.style.display = 'none';
    return;
  }
  const reader = new FileReader();
  reader.onload = function(e) {
    previewImage.src = e.target.result;
    previewImage.style.display = 'block';
  };
  reader.readAsDataURL(file);
}
// Если выбрать через input
fileInput.addEventListener('change', function() {
  if (fileInput.files && fileInput.files[0]) {
    showPreview(fileInput.files[0]);
  }
});
function updateCharCount(input, counterSelector, max) {
  const val = input.value.length;
  document.querySelector(counterSelector).textContent = `${val}/${max} characters`;
}
</script>
</html>
